<section id="gallery" class="container gallery">
  <h2>معرض الأعمال</h2>
  
  <div class="carousel" id="autoCarousel" dir="ltr">
    {{/* جلب كل الصور */}}
    {{ $images := resources.Match "images/gallery/*" }}
    
    {{ range $images }}
      {{/* loading="lazy" للأداء، وتنسيق الصورة لتملأ الكادر */}}
      <img src="{{ .RelPermalink }}" loading="lazy" alt="Gallery Image">
    {{ end }}

    {{ if eq (len $images) 0 }}
       <p style="text-align:center; width:100%;">يرجى رفع الصور في assets/images/gallery/</p>
    {{ end }}
  </div>
  
  <script>
    document.addEventListener("DOMContentLoaded", function() {
        const carousel = document.getElementById('autoCarousel');
        
        // سرعة التقليب (كل 3 ثواني)
        const intervalTime = 3000; 

        if (carousel) {
            setInterval(() => {
                // حسابات دقيقة للمسافة
                const maxScrollLeft = carousel.scrollWidth - carousel.clientWidth;
                
                // إذا وصلنا للنهاية (أو اقتربنا جداً منها بفرق 10 بكسل)
                // نعود للبداية فوراً
                if (carousel.scrollLeft >= maxScrollLeft - 10) {
                    carousel.scrollTo({
                        left: 0,
                        behavior: 'smooth'
                    });
                } else {
                    // وإلا، تحرك لليمين بمقدار عرض صورة واحدة تقريباً
                    carousel.scrollBy({
                        left: carousel.clientWidth, // يتحرك بمقدار عرض الشاشة الظاهرة
                        behavior: 'smooth'
                    });
                }
            }, intervalTime);
        }
    });
  </script>
</section>
